$(".bxpress-posts-list a[data-toggle='tooltip']").tooltip(),$(".post-item .like-this-post").click(function(){var t=$(this).data("post-id");if(void 0==t)return!1;var e=this;if($(this).parents("#p"+t).length<=0)return!1;$(this).find(".fa").addClass("clicked");var a={BXTOKEN_REQUEST:$("#bxpress-token").val(),id:t,action:"like"};return $.post("likes.php",a,function(t){if(1==t.error){var a='<div class="notifier-blocker"></div>';a+='<div class="notifier-content"><button type="button" class="close">&times;</button> '+t.message,a+="</div>",""!=t.token&&$("#bxpress-token").val(t.token),$("body").append(a).css("overflow","hidden"),$(e).find(".fa").removeClass("clicked")}if($("#p"+t.data.post).length<=0)return!1;if(t.data.likes>0?$("#p"+t.data.post+" .like-this-post .fa").removeClass("text-muted"):$("#p"+t.data.post+" .like-this-post .fa").addClass("text-muted"),$("#p"+t.data.post+" .likes-counter").html(t.data.likes),$("#p"+t.data.post+" .fa").removeClass("clicked"),""!=t.token&&$("#bxpress-token").val(t.token),"remove"==t.data.action){var s=$("#p"+t.data.post+" .post-likes > a[data-user='"+t.data.uid+"']");void 0!=s&&$(s).fadeOut(300,function(){$(this).remove()})}else{var o=$("#p"+t.data.post+" .post-likes a");o.length>=3&&$(o[0]).fadeOut(300,function(){$(this).remove()}),o=$("#p"+t.data.post+" .post-likes a");var i='<a style="display: none;" href="'+t.data.info+'" data-user="'+t.data.uid+'" data-toggle="tooltip" title="'+t.data.name+'"><img src="'+t.data.avatar+'" alt="'+t.data.name+'"></a>';o.length>0?($(o[0]).before(i),$("#p"+t.data.post+" .post-likes > .likes-more").html(t.data.likes>3?bxpressLang.likes_more.replace("%u",t.data.likes-3):"")):($("#p"+t.data.post+" .post-likes").append(bxpressLang.liked_by+"\n"+i),$("#p"+t.data.post+" .post-likes > .likes-more").html("")),$("#p"+t.data.post+" .post-likes > a[data-user='"+t.data.uid+"']").fadeIn("300")}},"json"),!1}),$("body").on("click",".notifier-content .close",function(){$(this).parents(".notifier-content").fadeOut(300,function(){$(".notifier-blocker").fadeOut(300,function(){$(".notifier-content").remove(),$(".notifier-blocker").remove(),$("body").css("overflow","auto")})})});
